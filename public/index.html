<script>
document.getElementById("cadastro-form")?.addEventListener("submit", async function (event) {
  event.preventDefault();

  const nome = document.getElementById("nome").value;
  const email = document.getElementById("email").value;
  const telefone = document.getElementById("telefone").value;
  const password = document.getElementById("password").value;
  const confirmPassword = document.getElementById("confirm-password").value;
  const referralCode = document.getElementById("referral-code-input").value;

  const errorBox = document.querySelector("#page-cadastro .auth-error");
  const successBox = document.querySelector("#page-cadastro .auth-success");

  errorBox.style.display = "none";
  successBox.style.display = "none";

  if (password !== confirmPassword) {
    errorBox.innerText = "As senhas nÃ£o coincidem!";
    errorBox.style.display = "block";
    return;
  }

  try {
    const response = await fetch("/api/auth/register", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ nome, email, telefone, password, referral_code_input: referralCode }),
    });

    const result = await response.json();

    if (response.ok) {
      successBox.innerText = "Cadastro realizado com sucesso!";
      successBox.style.display = "block";
      // Aqui vocÃª pode redirecionar ou mudar de pÃ¡gina se quiser
    } else {
      errorBox.innerText = result.message || "Erro ao cadastrar.";
      errorBox.style.display = "block";
    }
  } catch (error) {
    console.error("Erro na requisiÃ§Ã£o:", error);
    errorBox.innerText = "Erro de conexÃ£o com o servidor.";
    errorBox.style.display = "block";
  }
});
  </script>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raspadinha Premiada</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/payment.css">
    <link rel="stylesheet" href="css/reports.css">
    <link rel="stylesheet" href="css/credibility.css">
    <link rel="stylesheet" href="css/visual-improvements.css">
    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="css/admin.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="background-container">
        <!-- Aqui serÃ¡ carregada a imagem de fundo -->
    </div>

    <!-- BotÃ£o de logout fixo -->
    <button id="btn-logout-fixed" class="logout-button auth-only">Sair</button>

    <header class="site-header">
        <div class="logo">
            <h1>Raspadinha Premiada</h1>
        </div>
        <nav class="main-nav">
            <ul>
                <li><a href="#" id="nav-home">InÃ­cio</a></li>
                <li class="auth-only"><a href="#" id="nav-referral">Indique e Ganhe</a></li> <!-- Novo link -->
                <li class="auth-only"><a href="#" id="nav-historico">Meu HistÃ³rico</a></li>
                <li class="auth-only"><a href="#" id="nav-saldo">Meu Saldo</a></li>
                <li class="admin-only"><a href="#" id="nav-admin">Painel Admin</a></li>
            </ul>
        </nav>
        <div class="user-actions">
            <button id="btn-login" class="btn-secondary no-auth-only">Entrar</button>
            <button id="btn-register" class="btn-outline no-auth-only">Cadastrar</button>
            <div class="user-info auth-only">
                <span id="user-name">UsuÃ¡rio</span>
                <div class="user-dropdown">
                    <a href="#" id="nav-profile">Meu Perfil</a>
                    <a href="#" id="btn-logout">Sair</a>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- PÃ¡gina inicial (nÃ£o logado) -->
        <div class="page" id="page-home">
            <div class="hero-section">
                <h2>Raspe e Ganhe PrÃªmios InstantÃ¢neos!</h2>
                <p>PrÃªmios de atÃ© R$500! Cada raspadinha custa apenas R$5.</p>
                <button id="btn-jogar-agora" class="btn-primary pulse-animation">Jogar Agora</button>
            </div>
            
            <div class="features-section">
                <div class="feature">
                    <div class="feature-icon">ðŸ’°</div>
                    <h3>PrÃªmios InstantÃ¢neos</h3>
                    <p>Ganhe dinheiro na hora com nossas raspadinhas premiadas!</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ðŸ”’</div>
                    <h3>100% Seguro</h3>
                    <p>Pagamentos processados com seguranÃ§a pela InfinityPay.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ðŸ’¸</div>
                    <h3>Saque RÃ¡pido</h3>
                    <p>Receba seus prÃªmios via Pix em atÃ© 24 horas.</p>
                </div>
            </div>
            
            <div class="winners-section">
                <h3>Ãšltimos Ganhadores</h3>
                <div class="winners-list">
                    <div class="winner">
                        <div class="winner-avatar">ðŸ‘¤</div>
                        <div class="winner-info">
                            <p class="winner-name">Maria S.</p>
                            <p class="winner-prize">R$ 100,00</p>
                        </div>
                    </div>
                    <div class="winner">
                        <div class="winner-avatar">ðŸ‘¤</div>
                        <div class="winner-info">
                            <p class="winner-name">JoÃ£o P.</p>
                            <p class="winner-prize">R$ 50,00</p>
                        </div>
                    </div>
                    <div class="winner">
                        <div class="winner-avatar">ðŸ‘¤</div>
                        <div class="winner-info">
                            <p class="winner-name">Ana C.</p>
                            <p class="winner-prize">R$ 20,00</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Etapa 1: Cadastro -->
        <div class="page" id="page-cadastro" style="display: none;">
            <div class="form-container">
                <h2>Cadastro</h2>
                <form id="cadastro-form">
                    <div class="form-group">
                        <label for="nome">Nome Completo</label>
                        <input type="text" id="nome" name="nome" required>
                    </div>
                    <div class="form-group">
                        <label for="email">E-mail</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="telefone">Telefone (com DDD)</label> <!-- Telefone agora obrigatÃ³rio -->
                        <input type="tel" id="telefone" name="telefone" placeholder="(XX) XXXXX-XXXX" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Senha</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">Confirmar Senha</label>
                        <input type="password" id="confirm-password" name="confirm-password" required>
                    </div>
                    <div class="form-group">
                        <label for="referral-code-input">CÃ³digo de IndicaÃ§Ã£o / Cupom (Opcional)</label>
                        <input type="text" id="referral-code-input" name="referral_code_input">
                    </div>
                    <button type="submit" class="btn-primary">Cadastrar</button>
                    <p class="form-link">JÃ¡ tem uma conta? <a href="#" id="link-to-login">FaÃ§a login</a></p>
                </form>
                
                <!-- Mensagens de autenticaÃ§Ã£o -->
                <div class="auth-error" style="display: none;"></div>
                <div class="auth-success" style="display: none;"></div>
                <div class="auth-loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>Processando...</p>
                </div>
                
                <!-- Selo de seguranÃ§a -->
                <div class="security-badge">
                    <svg class="badge-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
                    </svg>
                    <span class="badge-text">Site Seguro | ConexÃ£o Protegida (SSL)</span>
                </div>
            </div>
        </div>

        <!-- PÃ¡gina de Login -->
        <div class="page" id="page-login" style="display: none;">
            <div class="form-container">
                <h2>Login</h2>
                <form id="login-form">
                    <div class="form-group">
                        <label for="login-email">E-mail</label>
                        <input type="email" id="login-email" name="login-email" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Senha</label>
                        <input type="password" id="login-password" name="login-password" required>
                    </div>
                    <button type="submit" class="btn-primary">Entrar</button>
                    <p class="form-link">NÃ£o tem uma conta? <a href="#" id="link-to-register">Cadastre-se</a></p>
                </form>
                
                <!-- Mensagens de autenticaÃ§Ã£o -->
                <div class="auth-error" style="display: none;"></div>
                <div class="auth-success" style="display: none;"></div>
                <div class="auth-loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>Processando...</p>
                </div>
                
                <!-- Selo de seguranÃ§a -->
                <div class="security-badge">
                    <svg class="badge-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
                    </svg>
                    <span class="badge-text">Site Seguro | ConexÃ£o Protegida (SSL)</span>
                </div>
            </div>
        </div>

        <!-- Etapa 2: Compra de Raspadinhas -->
        <div class="page" id="page-compra" style="display: none;">
            <div class="form-container">
                <h2>Comprar Raspadinhas</h2>
                <div class="status-message status-info">
                    <p>PrÃªmios de atÃ© R$500! Cada raspadinha custa apenas R$5.</p>
                </div>
                <form id="compra-form">
                    <div class="form-group">
                        <label for="quantidade">Quantidade de Raspadinhas</label>
                        <input type="number" id="quantidade" name="quantidade" min="1" step="1" value="1" required>
                    </div>
                    <!-- OpÃ§Ã£o para usar raspadinha bÃ´nus -->
                    <div class="form-group bonus-option" id="bonus-raspadinha-option" style="display: none;">
                        <input type="checkbox" id="usar-bonus-raspadinha" name="usar_bonus">
                        <label for="usar-bonus-raspadinha">Usar 1 Raspadinha BÃ´nus (DisponÃ­veis: <span id="bonus-disponiveis-compra">0</span>)</label>
                        <small>A raspadinha bÃ´nus serÃ¡ adicionada Ã  sua compra sem custo.</small>
                    </div>
                    <div class="form-group">
                        <label for="valor-total">Valor Total (R$)</label>
                        <input type="text" id="valor-total" name="valor-total" readonly>
                    </div>
                    
                    <div class="payment-options auth-only">
                        <h3>Forma de Pagamento</h3>
                        <div class="payment-option">
                            <input type="radio" id="payment-pix" name="payment-method" value="pix" checked>
                            <label for="payment-pix">Pix</label>
                        </div>
                        <div class="payment-option" id="payment-option-credit-card">
                            <input type="radio" id="payment-credit-card" name="payment-method" value="credit-card">
                            <label for="payment-credit-card">CartÃ£o de CrÃ©dito</label>
                        </div>
                        <div class="payment-option" id="payment-option-saldo">
                            <input type="radio" id="payment-saldo" name="payment-method" value="saldo">
                            <label for="payment-saldo">Usar Saldo (R$ <span id="saldo-disponivel">0,00</span>)</label>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-primary" id="btn-confirmar-pagamento">Confirmar Pagamento</button>
                </form>
                
                <!-- Selo de seguranÃ§a -->
                <div class="security-badge">
                    <svg class="badge-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
                    </svg>
                    <span class="badge-text">Pagamento Seguro | Processado por InfinityPay</span>
                </div>
            </div>
        </div>

        <!-- Modal de Pagamento PIX -->
        <div id="modal-pagamento" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Pagamento via PIX</h2>
                    <span class="close-button">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="pix-section">
                        <div class="qr-code-container">
                            <img src="img/qr-code-example.png" alt="QR Code PIX" id="pix-qrcode">
                        </div>
                        <div class="pix-instructions">
                            <p>Escaneie o QR Code acima com o aplicativo do seu banco ou copie o cÃ³digo PIX abaixo:</p>
                            <div class="pix-code-container">
                                <input type="text" id="pix-code" value="00020126580014BR.GOV.BCB.PIX0136example.com/pix/v2/123456789" readonly>
                                <button id="btn-copy-pix">Copiar</button>
                            </div>
                        </div>
                    </div>
                    <div class="payment-status">
                        <div class="payment-spinner"></div>
                        <p>Aguardando confirmaÃ§Ã£o automÃ¡tica...</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="btn-cancel-payment" class="btn btn-secondary">Cancelar</button>
                    <button id="btn-confirm-payment" class="btn btn-primary">JÃ¡ Paguei</button>
                </div>
            </div>
        </div>

        <!-- Modal de Pagamento CartÃ£o de CrÃ©dito -->
        <div id="modal-pagamento-cartao" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Pagamento com CartÃ£o de CrÃ©dito</h2>
                    <span class="close-button">&times;</span>
                </div>
                <div class="modal-body">
                    <form id="credit-card-form">
                        <div class="form-group">
                            <label for="card-number">NÃºmero do CartÃ£o</label>
                            <input type="text" id="card-number" placeholder="0000 0000 0000 0000" maxlength="19" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group half">
                                <label for="card-expiry">Validade (MM/AA)</label>
                                <input type="text" id="card-expiry" placeholder="MM/AA" maxlength="5" required>
                            </div>
                            <div class="form-group half">
                                <label for="card-cvv">CVV</label>
                                <input type="text" id="card-cvv" placeholder="123" maxlength="4" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="card-name">Nome no CartÃ£o</label>
                            <input type="text" id="card-name" placeholder="Nome como estÃ¡ no cartÃ£o" required>
                        </div>
                        <div class="form-group">
                            <label for="card-installments">Parcelas</label>
                            <select id="card-installments" required>
                                <option value="1">1x sem juros</option>
                                <option value="2">2x sem juros</option>
                                <option value="3">3x sem juros</option>
                            </select>
                        </div>
                    </form>
                    <div class="payment-status" style="display: none;">
                        <div class="payment-spinner"></div>
                        <p>Processando pagamento...</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="btn-cancel-card-payment" class="btn btn-secondary">Cancelar</button>
                    <button id="btn-confirm-card-payment" class="btn btn-primary">Pagar Agora</button>
                </div>
            </div>
        </div>

        <!-- Etapa 3: Raspadinhas -->
        <div class="page" id="page-raspadinhas" style="display: none;">
            <div class="form-container">
                <h2>Suas Raspadinhas</h2>
                <p>Passe o dedo ou mouse sobre as raspadinhas para revelar os prÃªmios!</p>
                
                <!-- Contador de progresso -->
                <div class="progress-container">
                    <div class="progress-text" id="progress-text">Raspou 0 de 0 raspadinhas</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                
                <div id="raspadinhas-container" class="raspadinhas-grid"></div>
                <button id="btn-finalizar" class="btn-primary" style="display: none;">Ver Resultado</button>
            </div>
        </div>

        <!-- Etapa 4: Saque -->
        <div class="page" id="page-saque" style="display: none;">
            <div class="form-container">
                <h2>ParabÃ©ns!</h2>
                <div id="resultado-container" class="status-message status-success">
                    <p>VocÃª ganhou: <span id="valor-ganho">R$ 0,00</span></p>
                </div>
                <form id="saque-form">
                    <div class="form-group">
                        <label for="chave-pix">Informe sua chave Pix para receber</label>
                        <input type="text" id="chave-pix" name="chave-pix" placeholder="CPF, CNPJ, E-mail, Telefone ou Chave AleatÃ³ria" required>
                    </div>
                    <button type="submit" class="btn-primary">Solicitar Saque</button>
                </form>
                
                <!-- Selo de seguranÃ§a -->
                <div class="security-badge">
                    <svg class="badge-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
                    </svg>
                    <span class="badge-text">Saque Seguro | Processado por InfinityPay</span>
                </div>
            </div>
        </div>

        <!-- Mensagem de ConfirmaÃ§Ã£o de Saque -->
        <div class="page" id="page-confirmacao-saque" style="display: none;">
            <div class="form-container">
                <h2>SolicitaÃ§Ã£o Enviada!</h2>
                <div class="status-message status-success">
                    <p>Seu saque foi solicitado com sucesso e serÃ¡ processado em breve.</p>
                </div>
                <button id="btn-jogar-novamente" class="btn-primary">Jogar Novamente</button>
                
                <!-- Ãšltimos ganhadores -->
                <div class="winners-container">
                    <h3>Ãšltimos Ganhadores</h3>
                    <ul class="winners-list">
                        <li>Maria S. - <strong>R$ 100,00</strong></li>
                        <li>JoÃ£o P. - <strong>R$ 50,00</strong></li>
                        <li>Ana C. - <strong>R$ 20,00</strong></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- PÃ¡gina de Perfil do UsuÃ¡rio -->
        <div class="page" id="page-profile" style="display: none;">
            <div class="form-container">
                <h2>Meu Perfil</h2>
                <form id="profile-form">
                    <div class="form-group">
                        <label for="profile-nome">Nome Completo</label>
                        <input type="text" id="profile-nome" name="profile-nome" required>
                    </div>
                    <div class="form-group">
                        <label for="profile-email">E-mail (nÃ£o editÃ¡vel)</label>
                        <input type="email" id="profile-email" name="profile-email" readonly>
                    </div>
                    <div class="form-group">
                        <label for="profile-telefone">Telefone</label>
                        <input type="tel" id="profile-telefone" name="profile-telefone" required>
                    </div>
                    <hr>
                    <h4>Alterar Senha (opcional)</h4>
                    <div class="form-group">
                        <label for="profile-password">Nova Senha</label>
                        <input type="password" id="profile-password" name="profile-password">
                    </div>
                    <div class="form-group">
                        <label for="profile-confirm-password">Confirmar Nova Senha</label>
                        <input type="password" id="profile-confirm-password" name="profile-confirm-password">
                    </div>
                    <button type="submit" class="btn-primary">Salvar AlteraÃ§Ãµes</button>
                </form>
                <!-- Mensagens -->
                <div class="auth-error" style="display: none;"></div>
                <div class="auth-success" style="display: none;"></div>
                <div class="auth-loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>Salvando...</p>
                </div>
            </div>
        </div>

        <!-- PÃ¡gina de HistÃ³rico de Jogos -->
        <div class="page" id="page-historico" style="display: none;">
            <div class="form-container">
                <h2>HistÃ³rico de Jogos</h2>
                <div id="historico-jogos-container">
                    <!-- HistÃ³rico serÃ¡ carregado aqui via JS -->
                    <p>Carregando histÃ³rico...</p>
                </div>
            </div>
        </div>

        <!-- PÃ¡gina de Saldo e Saques -->
        <div class="page" id="page-saldo" style="display: none;">
            <div class="form-container">
                <h2>Meu Saldo e Saques</h2>
                <div class="saldo-info">
                    <p>Saldo Atual: <strong id="saldo-atual">R$ 0,00</strong></p>
                </div>
                <hr>
                <h3>Solicitar Saque</h3>
                <form id="saque-form-saldo">
                    <div class="form-group">
                        <label for="saque-valor">Valor a Sacar</label>
                        <input type="number" id="saque-valor" name="saque-valor" step="0.01" min="10" required>
                        <small>Valor mÃ­nimo para saque: R$ 10,00</small>
                    </div>
                    <div class="form-group">
                        <label for="saque-chave-pix">Chave Pix</label>
                        <input type="text" id="saque-chave-pix" name="saque-chave-pix" placeholder="CPF, CNPJ, E-mail, Telefone ou Chave AleatÃ³ria" required>
                    </div>
                    <button type="submit" class="btn-primary">Solicitar Saque</button>
                </form>
                 <!-- Mensagens -->
                 <div class="auth-error" style="display: none;"></div>
                 <div class="auth-success" style="display: none;"></div>
                 <div class="auth-loading" style="display: none;">
                     <div class="spinner"></div>
                     <p>Processando...</p>
                 </div>
                <hr>
                <h3>HistÃ³rico de Saques</h3>
                <div id="historico-saques-container">
                    <!-- HistÃ³rico de saques serÃ¡ carregado aqui via JS -->
                    <p>Carregando histÃ³rico de saques...</p>
                </div>
            </div>
        </div>

        <!-- Nova PÃ¡gina: Indique e Ganhe -->
        <div class="page" id="page-referral" style="display: none;">
            <div class="form-container">
                <h2>Indique e Ganhe</h2>
                <p>Convide seus amigos para jogar na Raspadinha Premiada e ganhe <strong>1 raspadinha bÃ´nus</strong> a cada 3 amigos que se cadastrarem usando seu cÃ³digo!</p>
                
                <div class="referral-info">
                    <h4>Seu CÃ³digo de IndicaÃ§Ã£o:</h4>
                    <div class="referral-code-box">
                        <input type="text" id="user-referral-code" readonly>
                        <button id="btn-copy-referral-code" class="btn-secondary">Copiar</button>
                    </div>
                </div>

                <div class="referral-progress">
                    <h4>Seu Progresso:</h4>
                    <p>Amigos indicados: <strong id="user-referral-count">0</strong> / 3</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="referral-progress-fill" style="width: 0%;"></div>
                    </div>
                    <small>VocÃª ganharÃ¡ 1 raspadinha bÃ´nus ao completar a barra.</small>
                </div>

                <div class="referral-bonus">
                    <h4>Raspadinhas BÃ´nus DisponÃ­veis:</h4>
                    <p><strong id="user-bonus-raspadinhas">0</strong></p>
                    <small>Use suas raspadinhas bÃ´nus na tela de compra!</small>
                </div>
            </div>
        </div>

        <!-- PÃ¡gina do Painel Administrativo -->
        <div class="page" id="page-admin" style="display: none;">
            <div class="admin-container">
                <h2>Painel Administrativo</h2>
                <nav class="admin-nav">
                    <ul>
                        <li><a href="#" data-target="admin-dashboard">Dashboard</a></li>
                        <li><a href="#" data-target="admin-saques">Saques</a></li>
                        <li><a href="#" data-target="admin-jogos">Jogos</a></li>
                        <li><a href="#" data-target="admin-usuarios">UsuÃ¡rios</a></li>
                        <li><a href="#" data-target="admin-cupons">Cupons Parceiros</a></li> <!-- Novo Link -->
                        <li><a href="#" data-target="admin-relatorios">RelatÃ³rios</a></li>
                        <li><a href="#" data-target="admin-configuracoes">ConfiguraÃ§Ãµes</a></li>
                    </ul>
                </nav>

                <div class="admin-content">
                    <!-- SeÃ§Ã£o Dashboard -->
                    <div class="admin-section" id="admin-dashboard">
                        <h3>Dashboard</h3>
                        <div class="dashboard-stats">
                            <!-- EstatÃ­sticas serÃ£o carregadas aqui -->
                        </div>
                    </div>

                    <!-- SeÃ§Ã£o Saques -->
                    <div class="admin-section" id="admin-saques" style="display: none;">
                        <h3>Gerenciar Saques</h3>
                        <div class="filters">
                            <select id="saque-status-filter">
                                <option value="">Todos Status</option>
                                <option value="pendente">Pendentes</option>
                                <option value="processando">Processando</option>
                                <option value="concluido">ConcluÃ­dos</option>
                                <option value="cancelado">Cancelados</option>
                            </select>
                        </div>
                        <table id="saques-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>UsuÃ¡rio</th>
                                    <th>Valor</th>
                                    <th>Chave Pix</th>
                                    <th>Data SolicitaÃ§Ã£o</th>
                                    <th>Status</th>
                                    <th>AÃ§Ãµes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dados dos saques -->
                            </tbody>
                        </table>
                        <div class="pagination" id="saques-pagination">
                            <!-- PaginaÃ§Ã£o -->
                        </div>
                    </div>

                    <!-- SeÃ§Ã£o Jogos -->
                    <div class="admin-section" id="admin-jogos" style="display: none;">
                        <h3>HistÃ³rico de Jogos</h3>
                         <div class="filters">
                            <input type="text" id="jogo-user-filter" placeholder="Filtrar por ID do UsuÃ¡rio">
                            <input type="date" id="jogo-data-inicio-filter">
                            <input type="date" id="jogo-data-fim-filter">
                            <button id="btn-filtrar-jogos" class="btn-secondary">Filtrar</button>
                        </div>
                        <table id="jogos-table">
                            <thead>
                                <tr>
                                    <th>ID Jogo</th>
                                    <th>ID UsuÃ¡rio</th>
                                    <th>Qtd. Rasp.</th>
                                    <th>Valor Pago</th>
                                    <th>PrÃªmio Total</th>
                                    <th>Data</th>
                                    <th>Usou BÃ´nus?</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dados dos jogos -->
                            </tbody>
                        </table>
                         <div class="pagination" id="jogos-pagination">
                            <!-- PaginaÃ§Ã£o -->
                        </div>
                    </div>

                    <!-- SeÃ§Ã£o UsuÃ¡rios -->
                    <div class="admin-section" id="admin-usuarios" style="display: none;">
                        <h3>Gerenciar UsuÃ¡rios</h3>
                        <table id="usuarios-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nome</th>
                                    <th>Email</th>
                                    <th>Telefone</th>
                                    <th>Saldo</th>
                                    <th>Data Cadastro</th>
                                    <th>Ãšltimo Login</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dados dos usuÃ¡rios -->
                            </tbody>
                        </table>
                         <div class="pagination" id="usuarios-pagination">
                            <!-- PaginaÃ§Ã£o -->
                        </div>
                    </div>

                    <!-- Nova SeÃ§Ã£o: Cupons de Parceiros -->
                    <div class="admin-section" id="admin-cupons" style="display: none;">
                        <h3>Gerenciar Cupons de Parceiros</h3>
                        <button id="btn-novo-cupom" class="btn-primary">Criar Novo Cupom</button>
                        <table id="cupons-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>CÃ³digo</th>
                                    <th>Nome Parceiro</th>
                                    <th>Usos</th>
                                    <th>Status</th>
                                    <th>Data CriaÃ§Ã£o</th>
                                    <th>AÃ§Ãµes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dados dos cupons -->
                            </tbody>
                        </table>
                        <!-- Modal para criar/editar cupom -->
                        <div id="modal-cupom" class="modal">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h2 id="modal-cupom-title">Criar Novo Cupom</h2>
                                    <span class="close-button">&times;</span>
                                </div>
                                <div class="modal-body">
                                    <form id="cupom-form">
                                        <input type="hidden" id="cupom-id">
                                        <div class="form-group">
                                            <label for="cupom-code">CÃ³digo do Cupom</label>
                                            <input type="text" id="cupom-code" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="cupom-partner-name">Nome do Parceiro</label>
                                            <input type="text" id="cupom-partner-name" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="cupom-description">DescriÃ§Ã£o (Opcional)</label>
                                            <textarea id="cupom-description"></textarea>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button id="btn-cancel-cupom" class="btn btn-secondary">Cancelar</button>
                                    <button id="btn-save-cupom" class="btn btn-primary">Salvar Cupom</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- SeÃ§Ã£o RelatÃ³rios -->
                    <div class="admin-section" id="admin-relatorios" style="display: none;">
                        <h3>RelatÃ³rios</h3>
                        <div class="report-section">
                            <h4>RelatÃ³rio Financeiro</h4>
                            <div class="filters">
                                <label for="relatorio-data-inicio">Data InÃ­cio:</label>
                                <input type="date" id="relatorio-data-inicio">
                                <label for="relatorio-data-fim">Data Fim:</label>
                                <input type="date" id="relatorio-data-fim">
                                <button id="btn-gerar-relatorio-financeiro" class="btn-secondary">Gerar</button>
                            </div>
                            <div id="relatorio-financeiro-resultado">
                                <!-- Resultado do relatÃ³rio financeiro -->
                            </div>
                        </div>
                        <hr>
                        <div class="report-section">
                            <h4>RelatÃ³rio de Uso de Cupons</h4>
                             <button id="btn-gerar-relatorio-cupons" class="btn-secondary">Atualizar</button>
                            <table id="relatorio-cupons-table">
                                <thead>
                                    <tr>
                                        <th>CÃ³digo</th>
                                        <th>Nome Parceiro</th>
                                        <th>Usos</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Resultado do relatÃ³rio de cupons -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- SeÃ§Ã£o ConfiguraÃ§Ãµes -->
                    <div class="admin-section" id="admin-configuracoes" style="display: none;">
                        <h3>ConfiguraÃ§Ãµes Gerais</h3>
                        <form id="config-form">
                             <!-- ConfiguraÃ§Ãµes de Pagamento -->
                            <h4>Pagamentos</h4>
                            <div class="config-item">
                                <label for="config-pix-ativo">Ativar Pagamento PIX</label>
                                <input type="checkbox" id="config-pix-ativo" data-key="pix_enabled">
                            </div>
                            <div class="config-item">
                                <label for="config-pix-chave">Chave PIX Principal</label>
                                <input type="text" id="config-pix-chave" data-key="pix_key">
                            </div>
                             <div class="config-item">
                                <label for="config-cartao-ativo">Ativar Pagamento CartÃ£o</label>
                                <input type="checkbox" id="config-cartao-ativo" data-key="card_enabled">
                            </div>
                             <div class="config-item">
                                <label for="config-cartao-api-key">Chave API CartÃ£o</label>
                                <input type="text" id="config-cartao-api-key" data-key="card_api_key">
                            </div>
                            <!-- Outras ConfiguraÃ§Ãµes -->
                            <h4>Outras ConfiguraÃ§Ãµes</h4>
                            <div class="config-item">
                                <label for="config-valor-raspadinha">Valor da Raspadinha (R$)</label>
                                <input type="number" step="0.01" id="config-valor-raspadinha" data-key="valor_raspadinha">
                            </div>
                             <div class="config-item">
                                <label for="config-min-saque">Valor MÃ­nimo Saque (R$)</label>
                                <input type="number" step="0.01" id="config-min-saque" data-key="min_saque">
                            </div>
                            <button type="submit" class="btn-primary">Salvar ConfiguraÃ§Ãµes</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </div> <!-- Fim .container -->
    
    <footer class="site-footer">
        <div class="footer-links">
            <a href="termos.html" target="_blank">Termos de Uso</a>
            <a href="privacidade.html" target="_blank">PolÃ­tica de Privacidade</a>
            <a href="mailto:contato@raspadinha-premiada.com.br">Contato</a>
        </div>
        <div class="security-badge">
            <svg class="badge-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
            </svg>
            <span class="badge-text">Site Seguro | ConexÃ£o Protegida (SSL)</span>
        </div>
        <div class="footer-info">
            <p>&copy; 2025 Raspadinha Premiada - Todos os direitos reservados</p>
            <p>CNPJ: 12.345.678/0001-90 | Pagamentos processados por InfinityPay</p>
        </div>
        <!-- CTA para convidar amigos (agora leva para a pÃ¡gina de indicaÃ§Ã£o) -->
        <div class="invite-friends auth-only">
            <p>Ganhe 1 raspadinha grÃ¡tis convidando 3 amigos!</p>
            <button class="btn-secondary" id="btn-ir-indicacao">Convidar Amigos</button>
        </div>
    </footer>
    
    <!-- BotÃ£o de suporte via WhatsApp -->
    <a href="https://wa.me/5511987654321" target="_blank" class="support-button">
        <svg class="whatsapp-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/>
        </svg>
        <span>Precisa de ajuda? Fale com a gente no WhatsApp!</span>
    </a>

    <!-- Pop-up de Ganhador Recente -->
    <div id="winner-popup" class="winner-popup">
        <button class="close-popup-btn">&times;</button>
        <div class="popup-icon">ðŸŽ‰</div>
        <div class="popup-content">
            <p><strong id="popup-winner-name">AlguÃ©m</strong> acabou de ganhar <strong id="popup-winner-prize">R$ 50,00</strong>!</p>
            <button id="popup-play-now" class="btn-secondary btn-small">Jogar Agora</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/raspadinha-enhanced.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Raspadinha Premiada</title>
</head>
<body>
  <h1>Bem-vindo Ã  Raspadinha Premiada</h1>

  <form id="cadastro-form">
    <input type="text" id="nome" placeholder="Nome" required />
    <input type="email" id="email" placeholder="E-mail" required />
    <input type="tel" id="telefone" placeholder="Telefone" required />
    <button type="submit">Cadastrar</button>
  </form>

  <script>
    document.getElementById("cadastro-form")?.addEventListener("submit", function(event) {
      event.preventDefault();
      const nome = document.getElementById("nome")?.value;
      const email = document.getElementById("email")?.value;
      const telefone = document.getElementById("telefone")?.value;

      fetch("https://raspadinha-backend.onrender.com/cadastrar", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ nome, email, telefone })
      })
      .then(res => res.json())
      .then(data => {
        if (data.ok || data.sucesso) alert("Cadastro feito com sucesso!");
        else alert("Erro ao cadastrar: " + (data.mensagem || "Tente novamente."));
      })
      .catch(err => {
        alert("Erro de conexÃ£o com o servidor.");
        console.error(err);
      });
    });
  </script>
</body>
</html>
